<md-content class="md-padding" ng-show="$ctrl.selected">

  <form name="userForm">
    <fieldset ng-disabled="$ctrl.saving || $ctrl.deleting">

      <div layout="row" layout-align="end center">
        <h2>User Details</h2>
        <span flex></span>
        <md-menu ng-show="$ctrl.selected.id">
          <md-button ng-click="$ctrl.moreMenu($mdMenu, $event)">
            <md-icon md-menu-origin md-svg-icon="more"></md-icon>
          </md-button>
          <md-menu-content width="4">
            <md-menu-item>
              <md-button ng-click="$ctrl.promptToDeleteCurrentUser()">
                Delete User
              </md-button>
            </md-menu-item>
          </md-menu-content>
        </md-menu>
      </div>

      <div layout-gt-sm="row">
        <md-list-item>
          <img ng-src="https://avatars.githubusercontent.com/{{$ctrl.selected.githubHandle || 'github'}}" class="md-avatar input-avatar"
          />
          <md-input-container class="md-block" flex=40>
            <label>GitHub Handle</label>
            <input ng-model="$ctrl.currentUser.githubHandle" ng-change="$ctrl.onUserInfoChanged()">
          </md-input-container>
        </md-list-item>
        <md-list-item>
          <md-input-container class="md-block" flex=60>
            <label>Name</label>
            <input ng-model="$ctrl.currentUser.name" ng-change="$ctrl.onUserInfoChanged()">
          </md-input-container>
        </md-list-item>
      </div>
      <div layout-gt-sm="row">
        <md-list-item>
          <md-input-container class="md-block" flex>
            <label>Address</label>
            <input ng-model="$ctrl.currentUser.address" ng-change="$ctrl.onUserInfoChanged()">
          </md-input-container>
        </md-list-item>
      </div>
      <div layout-gt-sm="row">
        <md-list-item>
          <md-input-container class="md-block" flex=60>
            <label>City</label>
            <input ng-model="$ctrl.currentUser.city" ng-change="$ctrl.onUserInfoChanged()">
          </md-input-container>
          <md-input-container class="md-block" flex=15>
            <label>State</label>
            <input ng-model="$ctrl.currentUser.state" ng-change="$ctrl.onUserInfoChanged()">
          </md-input-container>
          <md-input-container class="md-block" flex=25>
            <label>Zip</label>
            <input ng-model="$ctrl.currentUser.zip" ng-change="$ctrl.onUserInfoChanged()">
          </md-input-container>
        </md-list-item>
      </div>

      <div ng-show="$ctrl.selected.pendingChanges && !$ctrl.saving">
        <md-button class="md-raised md-primary" ng-click="$ctrl.save()">
          Save
        </md-button>
        <md-button class="md-raised" ng-click="$ctrl.undoChanges()">
          Undo Changes
        </md-button>
      </div>

    </fieldset>
  </form>

  <div class="popup">
    <md-progress-circular ng-show="$ctrl.saving || $ctrl.deleting" md-mode="indeterminate" md-diameter="120"></md-progress-circular>
  </div>

</md-content>
